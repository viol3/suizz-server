{
  "version": 3,
  "sources": ["../../src/react.tsx"],
  "sourcesContent": ["// Copyright (c) Mysten Labs, Inc.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useStore } from '@nanostores/react';\nimport type { ReactNode } from 'react';\nimport { createContext, useContext, useEffect, useState } from 'react';\n\nimport type { EnokiFlowConfig } from './EnokiFlow.js';\nimport { EnokiFlow } from './EnokiFlow.js';\n\nconst EnokiFlowContext = createContext<EnokiFlow | null>(null);\n\n/** @deprecated use `registerEnokiWallets` instead */\nexport type EnokiFlowProviderProps = EnokiFlowConfig & {\n\tchildren: ReactNode;\n};\n\n/** @deprecated use `registerEnokiWallets` instead */\nexport function EnokiFlowProvider({ children, ...config }: EnokiFlowProviderProps) {\n\tconst [enokiFlow] = useState(() => new EnokiFlow(config));\n\treturn <EnokiFlowContext.Provider value={enokiFlow}>{children}</EnokiFlowContext.Provider>;\n}\n\n/** @deprecated use `registerEnokiWallets` and dapp-kit wallet hooks instead */\nexport function useEnokiFlow() {\n\tconst context = useContext(EnokiFlowContext);\n\tif (!context) {\n\t\tthrow new Error('Missing `EnokiFlowContext` provider');\n\t}\n\treturn context;\n}\n\n/** @deprecated use `registerEnokiWallets` and dapp-kit wallet hooks instead */\nexport function useZkLogin() {\n\tconst flow = useEnokiFlow();\n\treturn useStore(flow.$zkLoginState);\n}\n\n/** @deprecated use `registerEnokiWallets` and dapp-kit wallet hooks instead */\nexport function useZkLoginSession() {\n\tconst flow = useEnokiFlow();\n\treturn useStore(flow.$zkLoginSession).value;\n}\n\n/** @deprecated use `registerEnokiWallets` and dapp-kit wallet hooks instead */\nexport function useAuthCallback() {\n\tconst flow = useEnokiFlow();\n\tconst [state, setState] = useState<string | null>(null);\n\tconst [handled, setHandled] = useState(false);\n\tconst [hash, setHash] = useState<string | null>(null);\n\n\tuseEffect(() => {\n\t\tconst listener = () => setHash(window.location.hash.slice(1).trim());\n\t\tlistener();\n\n\t\twindow.addEventListener('hashchange', listener);\n\t\treturn () => window.removeEventListener('hashchange', listener);\n\t}, []);\n\n\tuseEffect(() => {\n\t\tif (!hash) return;\n\n\t\t(async () => {\n\t\t\ttry {\n\t\t\t\tsetState(await flow.handleAuthCallback(hash));\n\n\t\t\t\twindow.location.hash = '';\n\t\t\t} finally {\n\t\t\t\tsetHandled(true);\n\t\t\t}\n\t\t})();\n\t}, [hash, flow]);\n\n\treturn { handled, state };\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoBQ;AAjBR,mBAAyB;AAEzB,IAAAA,gBAA+D;AAG/D,uBAA0B;AAE1B,MAAM,uBAAmB,6BAAgC,IAAI;AAQtD,SAAS,kBAAkB,EAAE,UAAU,GAAG,OAAO,GAA2B;AAClF,QAAM,CAAC,SAAS,QAAI,wBAAS,MAAM,IAAI,2BAAU,MAAM,CAAC;AACxD,SAAO,4CAAC,iBAAiB,UAAjB,EAA0B,OAAO,WAAY,UAAS;AAC/D;AAGO,SAAS,eAAe;AAC9B,QAAM,cAAU,0BAAW,gBAAgB;AAC3C,MAAI,CAAC,SAAS;AACb,UAAM,IAAI,MAAM,qCAAqC;AAAA,EACtD;AACA,SAAO;AACR;AAGO,SAAS,aAAa;AAC5B,QAAM,OAAO,aAAa;AAC1B,aAAO,uBAAS,KAAK,aAAa;AACnC;AAGO,SAAS,oBAAoB;AACnC,QAAM,OAAO,aAAa;AAC1B,aAAO,uBAAS,KAAK,eAAe,EAAE;AACvC;AAGO,SAAS,kBAAkB;AACjC,QAAM,OAAO,aAAa;AAC1B,QAAM,CAAC,OAAO,QAAQ,QAAI,wBAAwB,IAAI;AACtD,QAAM,CAAC,SAAS,UAAU,QAAI,wBAAS,KAAK;AAC5C,QAAM,CAAC,MAAM,OAAO,QAAI,wBAAwB,IAAI;AAEpD,+BAAU,MAAM;AACf,UAAM,WAAW,MAAM,QAAQ,OAAO,SAAS,KAAK,MAAM,CAAC,EAAE,KAAK,CAAC;AACnE,aAAS;AAET,WAAO,iBAAiB,cAAc,QAAQ;AAC9C,WAAO,MAAM,OAAO,oBAAoB,cAAc,QAAQ;AAAA,EAC/D,GAAG,CAAC,CAAC;AAEL,+BAAU,MAAM;AACf,QAAI,CAAC,KAAM;AAEX,KAAC,YAAY;AACZ,UAAI;AACH,iBAAS,MAAM,KAAK,mBAAmB,IAAI,CAAC;AAE5C,eAAO,SAAS,OAAO;AAAA,MACxB,UAAE;AACD,mBAAW,IAAI;AAAA,MAChB;AAAA,IACD,GAAG;AAAA,EACJ,GAAG,CAAC,MAAM,IAAI,CAAC;AAEf,SAAO,EAAE,SAAS,MAAM;AACzB;",
  "names": ["import_react"]
}
